<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bomber Vampire ‚Äî Survivors</title>
    <meta name="description"
        content="Bomber Vampire: um jogo de sobreviv√™ncia com bombas estilo Bomberman + Vampire Survivors">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Phaser Game Container -->
    <div id="game-container"></div>

    <!-- White Flash overlay (juice) -->
    <div id="white-flash"></div>

    <!-- Kill Streak display -->
    <div id="streak-display"></div>

    <!-- HUD -->
    <div id="hud">
        <div class="hud-left">
            <div id="char-portrait"></div>
            <div class="hud-label">HP</div>
            <div id="hp-bar-container">
                <div id="hp-bar"></div>
            </div>
            <div class="hud-label" style="margin-top: 6px;">üí£ BOMBS</div>
            <div id="bomb-cooldown-container">
                <div id="bomb-cooldown-bar"></div>
            </div>
            <div class="hud-value" id="bomb-count">üí£ 1/1</div>
        </div>
        <div class="hud-center">
            <div class="hud-value" id="timer">00:00</div>
            <div id="xp-bar-container">
                <div id="xp-bar"></div>
            </div>
            <div class="hud-value" id="level-display">LV 1</div>
        </div>
        <div class="hud-right">
            <div class="hud-label">KILLS</div>
            <div class="hud-value" id="kills">0</div>
            <div id="combo-display"></div>
        </div>
    </div>

    <!-- Start / Character Select Overlay -->
    <div id="start-overlay">
        <div id="game-title">üí£ BOMBER VAMPIRE</div>
        <div id="game-subtitle">S U R V I V O R S</div>
        <div id="start-highscore" style="font-size: 8px; color: #ffcc00; margin: 8px 0;"></div>
        <div id="char-select"></div>
        <div id="start-instructions">
            WASD / ‚Üê ‚Üí ‚Üë ‚Üì MOVER &nbsp; SPACE BOMBA &nbsp; ESC PAUSA<br>
            ‚Üê ‚Üí SELECIONAR PERSONAGEM &nbsp; ENTER / HOLD SPACE (0.5s) CONFIRMAR
        </div>
        <button class="start-btn" id="start-btn">ENTER / HOLD SPACE (0.5s) ‚Äî START</button>
    </div>

    <!-- Level Up Overlay -->
    <div id="levelup-overlay">
        <div id="levelup-title">‚¨ÜÔ∏è LEVEL UP!</div>
        <div id="upgrade-options"></div>
        <div class="upgrade-hint" id="upgrade-hint">‚Üê ‚Üí SELECIONAR &nbsp; ENTER / HOLD SPACE (0.5s) CONFIRMAR</div>
    </div>

    <!-- Game Over -->
    <div id="gameover-overlay">
        <div id="gameover-title">GAME OVER</div>
        <div class="gameover-stat" id="go-time"></div>
        <div class="gameover-stat" id="go-kills"></div>
        <div class="gameover-stat" id="go-level"></div>
        <div class="gameover-stat" id="go-highscore" style="color:#ffcc00; margin-top:6px;"></div>
        <button class="go-btn" id="retry-btn">ENTER / HOLD SPACE (0.5s) ‚Äî RETRY</button>
    </div>

    <!-- Pause Menu -->
    <div id="pause-overlay">
        <div id="pause-title">‚è∏Ô∏è PAUSED</div>
        <div id="pause-options">
            <div class="pause-option selected">‚ñ∂Ô∏è RETOMAR JOGO</div>
            <div class="pause-option">üîô VOLTAR PARA SELE√á√ÉO</div>
        </div>
        <div class="pause-hint">‚Üë ‚Üì SELECIONAR &nbsp; ENTER / HOLD SPACE (0.5s) CONFIRMAR</div>
    </div>

    <!-- Phaser 3.80 CDN -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.1/dist/phaser.min.js"></script>

    <!-- Config Loader (must load before data files) -->
    <script src="js/data/ConfigLoader.js?v=3"></script>

    <!-- Data files (fallback defaults, overwritten by ConfigLoader) -->
    <script src="js/constants.js?v=3"></script>
    <script src="js/data/characters.js?v=3"></script>
    <script src="js/data/enemies.js?v=3"></script>
    <script src="js/data/upgrades.js?v=3"></script>

    <!-- Systems -->
    <script src="js/systems/AudioSystem.js?v=3"></script>
    <script src="js/systems/JuiceSystem.js?v=3"></script>
    <script src="js/systems/ElementalSystem.js?v=3"></script>
    <script src="js/systems/PlayerSystem.js?v=3"></script>
    <script src="js/systems/BombSystem.js?v=3"></script>
    <script src="js/systems/EnemySystem.js?v=3"></script>
    <script src="js/systems/GemSystem.js?v=3"></script>
    <script src="js/systems/WaveSystem.js?v=3"></script>
    <script src="js/systems/UpgradeSystem.js?v=3"></script>

    <!-- Scenes -->
    <script src="js/scenes/BootScene.js?v=3"></script>
    <script src="js/scenes/MenuScene.js?v=3"></script>
    <script src="js/scenes/GameScene.js?v=3"></script>
    <script src="js/scenes/HUDScene.js?v=3"></script>
    <script src="js/scenes/LevelUpScene.js?v=3"></script>
    <script src="js/scenes/GameOverScene.js?v=3"></script>

    <!-- Main entry point -->
    <script>
        // Load JSON configs, then create game
        (async function() {
            try {
                await ConfigLoader.load();
                console.log('[ConfigLoader] All configs loaded successfully', CONFIG);
            } catch (err) {
                console.warn('[ConfigLoader] Failed to load configs, using fallback defaults:', err);
            }

            // Phaser config (must be here, after Phaser CDN loads)
            const phaserConfig = {
                type: Phaser.AUTO,
                parent: 'game-container',
                width: window.innerWidth,
                height: window.innerHeight,
                pixelArt: true,
                backgroundColor: '#0a0a0f',
                physics: {
                    default: 'arcade',
                    arcade: {
                        gravity: { y: 0 },
                        debug: false
                    }
                },
                scale: {
                    mode: Phaser.Scale.RESIZE,
                    autoCenter: Phaser.Scale.CENTER_BOTH
                },
                scene: [BootScene, MenuScene, GameScene, HUDScene]
            };

            // Create game instance
            const game = new Phaser.Game(phaserConfig);

            // Handle window resize
            window.addEventListener('resize', () => {
                game.scale.resize(window.innerWidth, window.innerHeight);
            });
        })();
    </script>
</body>

</html>
